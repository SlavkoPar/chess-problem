!function(){"use strict";var e={481:function(e,n,r){var t=r(762),o=r(62),c=r(984).Chess,i=[["a8","b8","c8","d8","e8","f8","g8","h8"],["a7","b7","c7","d7","e7","f7","g7","h7"],["a6","b6","c6","d6","e6","f6","g6","h6"],["a5","b5","c5","d5","e5","f5","g5","h5"],["a4","b4","c4","d4","e4","f4","g4","h4"],["a3","b3","c3","d3","e3","f3","g3","h3"],["a2","b2","c2","d2","e2","f2","g2","h2"],["a1","b1","c1","d1","e1","f1","g1","h1"]],f=new RegExp("[#+]$"),s=new RegExp("#$"),a=[];self.onmessage=function(e){var n=JSON.parse(e.data),r=n.fromSquare,l=n.nSquares,u=n.testFen,v=u?new c(u):new c;u||v.clear();for(var d=0,h=0;h<i.length&&-1===(d=i[h].indexOf(r));h++);var g=d+l,p=[].concat((0,o.Z)(i[h+0].slice(d,g)),(0,o.Z)(i[h+1].slice(d,g)),(0,o.Z)(i[h+2].slice(d,g)),(0,o.Z)(i[h+3].slice(d,g)),(0,o.Z)(i[h+4].slice(d,g))),b=function(){var e,n=v.moves().filter((function(e){return!f.test(e)&&!e.includes("x")})),r=0,o=null,c=(0,t.Z)(n);try{for(c.s();!(e=c.n()).done;){var i=e.value;v.move(i);var a,l=v.moves(),d=0,h=(0,t.Z)(l);try{for(h.s();!(a=h.n()).done;){var g=a.value;if(v.move(g),d=v.moves().filter((function(e){return s.test(e)})).length,v.undo(),0===d)break}}catch(p){h.e(p)}finally{h.f()}d>0&&(u&&console.log("checkmate at second move",i),r++,o=i),v.undo()}}catch(p){c.e(p)}finally{c.f()}return u&&console.log(1===r?"Position is problem":"Position is not problem"),1===r?o:null},m=n.pieces.indexOf("k"),y=null;if(""===r)console.log("Invalid fromSquare");else if(u){console.time();var O=b(),k={fen:u,firstMove:O};self.postMessage(JSON.stringify(k)),console.timeEnd()}else!function e(n,r){var c,i=n.shift().charAt(0),f=i.toLowerCase(),s=/[RNBKQP]/.test(i)?"w":"b",l="k"===i,u=(0,t.Z)(p);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(!a.includes(d)&&("p"!==f||!d.includes("8")&&!d.includes("1"))){var h=v.put({type:f,color:s},d);if(v.isCheck()||l&&v.isAttacked(d,"w")||"b"===s&&v.isAttacked(a[0],"b"))v.remove(d);else if(h){l&&(y=null),a.push(d);var g=!1;if(r>m){var O=a.slice(m,a.length);g=!"111111112345678123456782222222333333344444445555555666666677777778888888".includes(O.map((function(e){return e.charAt(1)})).sort().join("")),g||(g=!"aaaaaaaabcdefghabcdefghbbbbbbbcccccccdddddddeeeeeeefffffffggggggghhhhhhh".includes(O.map((function(e){return e.charAt(0)})).sort().join("")))}if(!g)if(0===n.length){var k=v.fen();console.log("------",a,"---",k);var x=b();null!==x&&(x===y?x=null:y=x);var S={fen:k,firstMove:x};self.postMessage(JSON.stringify(S))}else e((0,o.Z)(n),r+1);a.pop(),v.remove(d)}}}}catch(j){u.e(j)}finally{u.f()}}((0,o.Z)(n.pieces),0)}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var c=n[t]={exports:{}};return e[t](c,c.exports,r),c.exports}r.m=e,r.x=function(){var e=r.O(void 0,[777],(function(){return r(481)}));return e=r.O(e)},function(){var e=[];r.O=function(n,t,o,c){if(!t){var i=1/0;for(l=0;l<e.length;l++){t=e[l][0],o=e[l][1],c=e[l][2];for(var f=!0,s=0;s<t.length;s++)(!1&c||i>=c)&&Object.keys(r.O).every((function(e){return r.O[e](t[s])}))?t.splice(s--,1):(f=!1,c<i&&(i=c));if(f){e.splice(l--,1);var a=o();void 0!==a&&(n=a)}}return n}c=c||0;for(var l=e.length;l>0&&e[l-1][2]>c;l--)e[l]=e[l-1];e[l]=[t,o,c]}}(),r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(n,t){return r.f[t](e,n),n}),[]))},r.u=function(e){return"static/js/"+e+".0e9f84b3.chunk.js"},r.miniCssF=function(e){},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/chess-problem/",function(){var e={481:1};r.f.i=function(n,t){e[n]||importScripts(r.p+r.u(n))};var n=self.webpackChunkchess_game=self.webpackChunkchess_game||[],t=n.push.bind(n);n.push=function(n){var o=n[0],c=n[1],i=n[2];for(var f in c)r.o(c,f)&&(r.m[f]=c[f]);for(i&&i(r);o.length;)e[o.pop()]=1;t(n)}}(),function(){var e=r.x;r.x=function(){return r.e(777).then(e)}}();r.x()}();
//# sourceMappingURL=481.59b997aa.chunk.js.map