!function(){"use strict";var e={481:function(e,n,r){var t=r(762),o=r(62),i=r(984).Chess,f=[["a8","b8","c8","d8","e8","f8","g8","h8"],["a7","b7","c7","d7","e7","f7","g7","h7"],["a6","b6","c6","d6","e6","f6","g6","h6"],["a5","b5","c5","d5","e5","f5","g5","h5"],["a4","b4","c4","d4","e4","f4","g4","h4"],["a3","b3","c3","d3","e3","f3","g3","h3"],["a2","b2","c2","d2","e2","f2","g2","h2"],["a1","b1","c1","d1","e1","f1","g1","h1"]],s=new RegExp("[#+]$"),c=new RegExp("#$"),a={1:"45678",2:"5678",3:"678",4:"78",5:"8"},u={a:"defgh",b:"efgh",c:"fgh",d:"gh",e:"h"},l=function(e){for(var n=e.map((function(e){return e.charAt(1)})).sort(),r=0;r<n.length-1;r++)if(!["6","7","8"].includes(n[r])&&a[n[r]].includes(n[r+1]))return!0;for(var t=e.map((function(e){return e.charAt(0)})).sort(),o=0;o<t.length-1;o++)if(!["f","g","h"].includes(t[o])&&u[t[o]].includes(t[o+1]))return!0;return!1},v=[];self.onmessage=function(e){var n=JSON.parse(e.data),r=n.fromSquare,a=n.nSquares,u=n.testFen,h=u?new i(u):new i;u||h.clear();for(var d=0,p=0;p<f.length&&-1===(d=f[p].indexOf(r));p++);for(var g=d+a,m=[],b=0;b<a;b++)m.push.apply(m,(0,o.Z)(f[p+b].slice(d,g)));var y=function(){var e,n=h.moves().filter((function(e){return!s.test(e)&&!e.includes("x")})),r=0,o=null,i=(0,t.Z)(n);try{for(i.s();!(e=i.n()).done;){var f=e.value;h.move(f);var a,l=h.moves(),v=0,d=(0,t.Z)(l);try{for(d.s();!(a=d.n()).done;){var p=a.value;if(h.move(p),v=h.moves().filter((function(e){return c.test(e)})).length,h.undo(),0===v)break}}catch(g){d.e(g)}finally{d.f()}v>0&&(u&&console.log("checkmate at second move",f),r++,o=f),h.undo()}}catch(g){i.e(g)}finally{i.f()}return u&&console.log(1===r?"Position is problem":"Position is not problem"),1===r?o:null},O=n.pieces.indexOf("k"),k=null;if(""===r)console.log("Invalid fromSquare");else if(u){console.time();var x=y(),S={fen:u,firstMove:x};self.postMessage(JSON.stringify(S)),console.timeEnd()}else!function e(n,r){var i,f=n.shift().charAt(0),s=f.toLowerCase(),c=/[RNBKQP]/.test(f)?"w":"b",a="k"===f,u=(0,t.Z)(m);try{for(u.s();!(i=u.n()).done;){var d=i.value;if(!v.includes(d)&&("p"!==s||!d.includes("8")&&!d.includes("1"))){var p=h.put({type:s,color:c},d);if(h.isCheck()||a&&h.isAttacked(d,"w")||"b"===c&&h.isAttacked(v[0],"b"))h.remove(d);else if(p){var g=!1,b=!1;if(a&&(k=null),v.push(d),r>0&&r<O){var x=v.slice(0,v.length);g=l(x)}else if(r>O){var S=v.slice(O,v.length);b=l(S)}if(!g&&!b)if(0===n.length){var w=h.fen();console.log("------",v,"---",w);var j=y();null!==j&&(j===k?j=null:k=j);var P={fen:w,firstMove:j};self.postMessage(JSON.stringify(P))}else e((0,o.Z)(n),r+1);v.pop(),h.remove(d)}}}}catch(C){u.e(C)}finally{u.f()}}((0,o.Z)(n.pieces),0)}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.m=e,r.x=function(){var e=r.O(void 0,[777],(function(){return r(481)}));return e=r.O(e)},function(){var e=[];r.O=function(n,t,o,i){if(!t){var f=1/0;for(u=0;u<e.length;u++){t=e[u][0],o=e[u][1],i=e[u][2];for(var s=!0,c=0;c<t.length;c++)(!1&i||f>=i)&&Object.keys(r.O).every((function(e){return r.O[e](t[c])}))?t.splice(c--,1):(s=!1,i<f&&(f=i));if(s){e.splice(u--,1);var a=o();void 0!==a&&(n=a)}}return n}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[t,o,i]}}(),r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(n,t){return r.f[t](e,n),n}),[]))},r.u=function(e){return"static/js/"+e+".0e9f84b3.chunk.js"},r.miniCssF=function(e){},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/chess-problem/",function(){var e={481:1};r.f.i=function(n,t){e[n]||importScripts(r.p+r.u(n))};var n=self.webpackChunkchess_game=self.webpackChunkchess_game||[],t=n.push.bind(n);n.push=function(n){var o=n[0],i=n[1],f=n[2];for(var s in i)r.o(i,s)&&(r.m[s]=i[s]);for(f&&f(r);o.length;)e[o.pop()]=1;t(n)}}(),function(){var e=r.x;r.x=function(){return r.e(777).then(e)}}();r.x()}();
//# sourceMappingURL=481.012adf17.chunk.js.map