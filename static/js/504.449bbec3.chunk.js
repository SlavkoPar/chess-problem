!function(){"use strict";var e={504:function(e,n,r){var t=r(762),o=r(62),f=function(e){return e.solveProblem="solveProblem",e.findProblem="findProblem",e}({}),i=r(984).Chess,c=[["a8","b8","c8","d8","e8","f8","g8","h8"],["a7","b7","c7","d7","e7","f7","g7","h7"],["a6","b6","c6","d6","e6","f6","g6","h6"],["a5","b5","c5","d5","e5","f5","g5","h5"],["a4","b4","c4","d4","e4","f4","g4","h4"],["a3","b3","c3","d3","e3","f3","g3","h3"],["a2","b2","c2","d2","e2","f2","g2","h2"],["a1","b1","c1","d1","e1","f1","g1","h1"]],a=new RegExp("[#+]$"),s=new RegExp("#$"),u=[],l=new i;l.clear(),self.onmessage=function(e){var n=JSON.parse(e.data);if(n.action===f.findProblem){for(var r=n.fromSquare,i=n.nSquares,v=0,d=0;d<c.length&&-1===(v=c[d].indexOf(r));d++);var h=[].concat((0,o.Z)(c[d+0].slice(v,v+i)),(0,o.Z)(c[d+1].slice(v,v+i)),(0,o.Z)(c[d+2].slice(v,v+i)),(0,o.Z)(c[d+3].slice(v,v+i)),(0,o.Z)(c[d+4].slice(v,v+i)));if(""!==n.fromSquare){var p=function(){var e,n=l.moves().filter((function(e){return!a.test(e)})),r=0,o=null,f=(0,t.Z)(n);try{for(f.s();!(e=f.n()).done;){var i=e.value;l.move(i);var c,u=l.moves(),v=0,d=(0,t.Z)(u);try{for(d.s();!(c=d.n()).done;){var h=c.value;if(l.move(h),v=l.moves().filter((function(e){return s.test(e)})).length,l.undo(),1!==v)break}}catch(p){d.e(p)}finally{d.f()}if(1===v&&(console.log("checkmate at second move",i),r++,o=i),r>1)break;if(l.undo(),r>1)break}}catch(p){f.e(p)}finally{f.f()}return 1===r?o:null};!function e(n){var r=n.shift(),f=r.charAt(0),i=f.toLowerCase(),c=/[RNBKQP]/.test(f)?"w":"b";console.log(r);var a,s=(0,t.Z)(h);try{for(s.s();!(a=s.n()).done;){var v=a.value;if(!u.includes(v)&&("p"!==i||!v.includes("8")&&!v.includes("1"))){var d=l.put({type:i,color:c},v);if(l.isCheck()||"k"===f&&l.isAttacked(v,"w")||"b"===c&&l.isAttacked(u[0],"b"))l.remove(v);else if(d){if(u.push(v),0===n.length){var b=l.fen();console.log("------",u,"---",b);var g=p(),m={loading:!1,fen:b,isCheckmate:null!=g,firstMove:g};self.postMessage(JSON.stringify(m))}else e((0,o.Z)(n));u.pop();l.remove(v),l.fen()}}}}catch(y){s.e(y)}finally{s.f()}}((0,o.Z)(n.pieces))}}}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var f=n[t]={exports:{}};return e[t](f,f.exports,r),f.exports}r.m=e,r.x=function(){var e=r.O(void 0,[777],(function(){return r(504)}));return e=r.O(e)},function(){var e=[];r.O=function(n,t,o,f){if(!t){var i=1/0;for(u=0;u<e.length;u++){t=e[u][0],o=e[u][1],f=e[u][2];for(var c=!0,a=0;a<t.length;a++)(!1&f||i>=f)&&Object.keys(r.O).every((function(e){return r.O[e](t[a])}))?t.splice(a--,1):(c=!1,f<i&&(i=f));if(c){e.splice(u--,1);var s=o();void 0!==s&&(n=s)}}return n}f=f||0;for(var u=e.length;u>0&&e[u-1][2]>f;u--)e[u]=e[u-1];e[u]=[t,o,f]}}(),r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(n,t){return r.f[t](e,n),n}),[]))},r.u=function(e){return"static/js/"+e+".0e9f84b3.chunk.js"},r.miniCssF=function(e){},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/chess-problem/",function(){var e={504:1,579:1};r.f.i=function(n,t){e[n]||importScripts(r.p+r.u(n))};var n=self.webpackChunkchess_game=self.webpackChunkchess_game||[],t=n.push.bind(n);n.push=function(n){var o=n[0],f=n[1],i=n[2];for(var c in f)r.o(f,c)&&(r.m[c]=f[c]);for(i&&i(r);o.length;)e[o.pop()]=1;t(n)}}(),function(){var e=r.x;r.x=function(){return r.e(777).then(e)}}();r.x()}();
//# sourceMappingURL=504.449bbec3.chunk.js.map